pipeline {
 
    environment 
       {
       dockerImage = "hello-world-image-" + "$BUILD_NUMBER"
       }

    agent any

    stages {
        stage ('Docker Build Images') {
            steps {
                echo dockerImage
                bat label: '', script: 'docker build -f Dockerfile -t "hello-world-image" + "$BUILD_NUMBER" .'
            }
        }
       
        stage ('Docker Run') {
            steps {
                bat label: '', script: 'docker run "hello-world-image" + "$BUILD_NUMBER"'
            }
        }
        stage ('Remove Image') {
            steps {
                bat label: '', script: 'docker rmi "hello-world-image" + "$BUILD_NUMBER"'
            }
        }

        
    }
}
